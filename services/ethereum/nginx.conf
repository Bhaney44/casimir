user www-data;
worker_processes 1;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 768;
}

http {
    server {
        listen ethereum.casimir.co:80;

        auth_basic “Restricted”;
        auth_basic_user_file auth.htpasswd;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection “upgrade”;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;

        location ^~ /goerli/rpc {
            proxy_pass http://127.0.0.1:8545/;
        }

        location ^~ /goerli/ws {
            proxy_pass http://127.0.0.1:8546/;
        }

        # location ^~ /mainnet/rpc {
        #     proxy_pass http://127.0.0.1:8546/;
        # }

        # location ^~ /mainnet/ws {
        #     proxy_pass http://127.0.0.1:8546/;
        # }
    }
}

stream {
    include /etc/nginx/streams-enabled/*.conf;
}
